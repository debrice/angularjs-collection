var indexOf=[].indexOf||function(t){for(var n=0,_=this.length;_>n;n++)if(n in this&&this[n]===t)return n;return-1};angular.module("collection",[]).factory("Collection",function(){var t;return t=function(){function t(t,n){null==t&&(t=[]),null==n&&(n={}),this.__primary_key__=n.primary_key||"id",this.__content__=t}return t.prototype.reset=function(t){return null==t&&(t=[]),this.__content__=_.clone(t)},t.prototype.size=function(){return this.__content__.length},t.prototype.add=function(t){var n,e,r,i,o,c,u;if(_.isArray(t)||(t=[t]),this.__content__.length){e=_.indexBy(this.__content__,this.__primary_key__),o=_.partition(t,function(t){return function(n){var _,r;return _=n[t.__primary_key__],_ in e?(r=t.__content__.indexOf(e[_]),t.__content__[r]=n,!0):void 0}}(this)),r=o[0],c=o[1];for(n=0,i=c.length;i>n;n++)u=c[n],this.__content__.push(u)}else this.__content__=_.clone(t);return this},t.prototype.where=function(t){return t?_.isArray(t)?_.filter(this.__content__,function(n){return function(_){var e;return e=_[n.__primary_key__],indexOf.call(t,e)>=0}}(this)):_.where(this.__content__,t):[]},t.prototype.get=function(t){return _.isString(t)||_.isNumber(t)?_.find(this.__content__,this.__primary_key__,t):_.find(this.__content__,t)},t.prototype.remove=function(t){return null==t?this:((_.isString(t)||_.isNumber(t))&&(t=[t]),_.isArray(t)?_.remove(this.__content__,function(n){return function(_){var e;return e=_[n.__primary_key__],indexOf.call(t,e)>=0}}(this)):_.remove(this.__content__,t))},t.prototype.filter=function(t){return _.filter(this.__content__,t)},t.prototype.reject=function(t){return _.reject(this.__content__,t)},t.prototype.groupBy=function(t){return _.groupBy(this.__content__,t)},t.prototype.last=function(){return _.last(this.__content__)},t.prototype.first=function(){return _.first(this.__content__)},t.prototype.pluck=function(t){return _.pluck(this.__content__,t)},Object.defineProperties(t.prototype,{models:{get:function(){return _.clone(this.__content__)},set:function(){throw Error("collection.models is a readonly attribute")}}}),t}()});